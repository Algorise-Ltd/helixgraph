{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Marketing Order Schema",
  "version": "0.9",
  "description": "Schema for e-commerce orders attributed to marketing campaigns",
  "type": "object",
  "properties": {
    "order_id": {
      "type": "string",
      "description": "Unique order identifier",
      "pattern": "^ORD-"
    },
    "campaign_id": {
      "type": "string",
      "description": "Reference to campaign",
      "pattern": "^CMP-"
    },
    "platform": {
      "type": "string",
      "description": "E-commerce platform",
      "enum": ["Shopify", "Magento", "Retail Store", "Amazon", "WooCommerce", "SAP Commerce", "Custom"]
    },
    "revenue": {
      "type": "number",
      "minimum": 0,
      "description": "Order revenue value"
    },
    "currency": {
      "type": "string",
      "enum": ["EUR", "USD", "GBP"],
      "description": "Currency code"
    },
    "conversion_date": {
      "type": "string",
      "format": "date",
      "description": "Date of order conversion"
    },
    "customer_id": {
      "type": "string",
      "description": "Customer identifier (optional)"
    },
    "order_status": {
      "type": "string",
      "enum": ["pending", "confirmed", "shipped", "delivered", "cancelled", "refunded"],
      "description": "Order status"
    },
    "items": {
      "type": "array",
      "description": "Order line items",
      "items": {
        "$ref": "#/definitions/OrderItem"
      }
    }
  },
  "required": ["order_id", "platform", "revenue", "currency", "conversion_date"],
  "definitions": {
    "OrderItem": {
      "type": "object",
      "properties": {
        "product_id": {
          "type": "string",
          "description": "Product identifier"
        },
        "quantity": {
          "type": "number",
          "minimum": 1
        },
        "unit_price": {
          "type": "number",
          "minimum": 0
        },
        "total_price": {
          "type": "number",
          "minimum": 0
        }
      },
      "required": ["product_id", "quantity", "unit_price"]
    }
  }
}


